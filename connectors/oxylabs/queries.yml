workflow:

  # oxylabs-web-scraping
  name: "oxylabs-web-scraping"
  title: "Oxylabs - Web Scraping"
  description: "Workflow to scrape a web page."
  context-variables:
    debugger:
      enabled: true
    oxylabs:
      username: "$TEMP_CONTEXT_VARIABLE_OXYLABS_USERNAME"
      password: "$TEMP_CONTEXT_VARIABLE_OXYLABS_PASSWORD"
  inputs:
    parser: "$.get('parser') == 'true'"
    render: "$.get('render')"
    source: "$.get('source', 'universal')"
    url: "$.get('url')"
  outputs:
    result: "$.get('result')"
    workflow-status: "'executed'"
  tasks:

    - type: "connector"
      name: "oxylabs-post-queries"
      description: "Scrape a web page."
      condition: "$.get('url') is not None"
      connector:
        name: "oxylabs"
        command: "post-queries"
      inputs:
        body: |
          {
            "parser": $.get('parser'),
            "render": $.get('render'),
            "source": $.get('source'),
            "url": $.get('url'),
          }
      outputs:
        result: "$"
